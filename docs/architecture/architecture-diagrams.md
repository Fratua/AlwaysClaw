# OpenClaw Windows 10 - Architecture Diagrams

## Complete System Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    OPENCLAW WINDOWS 10                                          │
│                              AI Agent Runtime Architecture                                       │
└─────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    EXTERNAL INTERFACES                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│   │   Gmail     │  │   Twilio    │  │   Twilio    │  │   Browser   │  │   System    │        │
│   │   (IMAP)    │  │   Voice     │  │    SMS      │  │   Control   │  │   Access    │        │
│   └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘        │
│          │                │                │                │                │                │
└──────────┼────────────────┼────────────────┼────────────────┼────────────────┼────────────────┘
           │                │                │                │                │
           ▼                ▼                ▼                ▼                ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                      GATEWAY LAYER                                              │
│                              (Communication Interface)                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐      │
│   │                           Message Router                                            │      │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                │      │
│   │  │   Gmail     │  │   Twilio    │  │   Browser   │  │   Internal  │                │      │
│   │  │   Adapter   │  │   Adapter   │  │   Adapter   │  │   Adapter   │                │      │
│   │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘                │      │
│   │         └─────────────────┴─────────────────┴─────────────────┘                     │      │
│   │                                    │                                                │      │
│   │                           ┌────────┴────────┐                                       │      │
│   │                           │ Session Manager │                                       │      │
│   │                           │  - Create       │                                       │      │
│   │                           │  - Track        │                                       │      │
│   │                           │  - Cleanup      │                                       │      │
│   │                           └────────┬────────┘                                       │      │
│   └────────────────────────────────────┼────────────────────────────────────────────────┘      │
│                                        │                                                        │
│                                        ▼                                                        │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐      │
│   │                         EVENT BUS (Message Queue)                                   │      │
│   │  ┌─────────────────────────────────────────────────────────────────────────────┐    │      │
│   │  │  INBOUND_MESSAGE │ TOOL_RESULT │ AGENT_RESPONSE │ CRON_TRIGGER │ HEARTBEAT  │    │      │
│   │  └─────────────────────────────────────────────────────────────────────────────┘    │      │
│   └─────────────────────────────────────────────────────────────────────────────────────┘      │
│                                        │                                                        │
└────────────────────────────────────────┼────────────────────────────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                       AGENT CORE                                                │
│                              (The Brain - Decision Making)                                      │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐      │
│   │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐          │      │
│   │  │   Intent    │───▶│   Action    │───▶│   Agentic   │───▶│ Reflection  │          │      │
│   │  │   Parser    │    │   Planner   │    │   Loop      │    │   Engine    │          │      │
│   │  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘          │      │
│   │         │                  │                  │                  │                   │      │
│   │         ▼                  ▼                  ▼                  ▼                   │      │
│   │  ┌─────────────────────────────────────────────────────────────────────────────┐    │      │
│   │  │                         GPT-5.2 (Extra High Thinking)                       │    │      │
│   │  └─────────────────────────────────────────────────────────────────────────────┘    │      │
│   └─────────────────────────────────────────────────────────────────────────────────────┘      │
│                                        │                                                        │
│   ┌────────────────────────────────────┼────────────────────────────────────────────────────┐   │
│   │                         15 AGENTIC LOOPS                                                │   │
│   │  ┌──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┐        │   │
│   │  │  ralph   │ research │ discovery│bug-finder│debugging │end-to-end│meta-cog  │        │   │
│   │  │ (default)│          │          │          │          │          │          │        │   │
│   │  ├──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┤        │   │
│   │  │explorat- │self-driven│self-    │self-     │self-     │ planning │context-  │        │   │
│   │  │  ion     │          │learning │updating  │upgrading │          │engineering│       │   │
│   │  └──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┘        │   │
│   │                                    │                                                    │   │
│   │  ┌─────────────────────────────────┴─────────────────────────────────────────────┐     │   │
│   │  │                    context-prompt-engineering                                 │     │   │
│   │  └─────────────────────────────────────────────────────────────────────────────┘     │   │
│   └───────────────────────────────────────────────────────────────────────────────────────┘   │
│                                        │                                                        │
└────────────────────────────────────────┼────────────────────────────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    EXECUTION LAYER                                              │
│                              (Action Execution Interface)                                       │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐      │
│   │                           Tool Registry                                             │      │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                │      │
│   │  │  File Sys   │  │   Browser   │  │    Shell    │  │    Code     │                │      │
│   │  │    Tool     │  │    Tool     │  │    Tool     │  │    Exec     │                │      │
│   │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘                │      │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                │      │
│   │  │   Gmail     │  │   Twilio    │  │   Search    │  │   System    │                │      │
│   │  │    Tool     │  │    Tool     │  │    Tool     │  │    Tool     │                │      │
│   │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘                │      │
│   └─────────────────────────────────────────────────────────────────────────────────────┘      │
│                                        │                                                        │
│                                        ▼                                                        │
│   ┌─────────────────────────────────────────────────────────────────────────────────────┐      │
│   │                        Sandbox Environment (Docker)                                 │      │
│   │  ┌─────────────────────────────────────────────────────────────────────────────┐    │      │
│   │  │  Isolated │  Resource Limits │  Network Restricted │  Audited               │    │      │
│   │  └─────────────────────────────────────────────────────────────────────────────┘    │      │
│   └─────────────────────────────────────────────────────────────────────────────────────┘      │
│                                        │                                                        │
└────────────────────────────────────────┼────────────────────────────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                      MEMORY SYSTEM                                              │
│                              (State Persistence & Retrieval)                                    │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐                    │
│   │   Session Memory    │  │   Long-term Memory  │  │   Vector Memory     │                    │
│   │   (Short-term)      │  │   (Persistent)      │  │   (Semantic Search) │                    │
│   │                     │  │                     │  │                     │                    │
│   │  - Message History  │  │  - Facts & Data     │  │  - Embeddings       │                    │
│   │  - Context Window   │  │  - User Profiles    │  │  - Similarity       │                    │
│   │  - Working Memory   │  │  - Learned Skills   │  │    Search           │                    │
│   └─────────────────────┘  └─────────────────────┘  └─────────────────────┘                    │
│                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                   CONFIGURATION FILES                                           │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                 │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│   │   SOUL.md   │  │ IDENTITY.md │  │   USER.md   │  │  MEMORY.md  │  │  AGENTS.md  │        │
│   │ Personality │  │ Presentation│  │ User Context│  │  Long-term  │  │  Loop Config│        │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                                           │
│   │ HEARTBEAT.md│  │  TOOLS.md   │  │ settings.json                                           │
│   │ Scheduled   │  │ Tool Defs   │  │ System Config                                           │
│   └─────────────┘  └─────────────┘  └─────────────┘                                           │
│                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Message Flow Sequence

```
User sends message via Gmail
         │
         ▼
┌─────────────────┐
│  Gmail Adapter  │
│  - Poll inbox   │
│  - Parse email  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Message Router  │
│  - Normalize    │
│  - Route        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Session Manager │
│  - Get/Create   │
│  - Track state  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   Event Bus     │
│ Publish:        │
│ INBOUND_MESSAGE │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Intent Parser  │
│  - Classify     │
│  - Extract      │
│  - Score        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Action Planner │
│  - Decompose    │
│  - Sequence     │
│  - Validate     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Agentic Loop   │
│  - Execute      │
│  - Iterate      │
│  - Reflect      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Tool Registry  │
│  - Select       │
│  - Execute      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│    Sandbox      │
│  - Isolate      │
│  - Execute      │
│  - Return       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Memory Update  │
│  - Store result │
│  - Learn        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Response Format │
│  - Compile      │
│  - Format       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Gmail Adapter  │
│  - Send reply   │
└────────┬────────┘
         │
         ▼
    User receives
       response
```

---

## Agentic Loop Selection Flow

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      AGENTIC LOOP SELECTION                              │
└─────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────┐
                    │ User Input  │
                    └──────┬──────┘
                           │
                           ▼
                    ┌─────────────┐
                    │  Explicit   │
                    │   Loop Tag? │
                    │   (@research)│
                    └──────┬──────┘
                           │
              ┌────────────┴────────────┐
              │Yes                      │No
              ▼                         ▼
       ┌─────────────┐           ┌─────────────┐
       │ Use Tagged  │           │ Parse Intent│
       │    Loop     │           └──────┬──────┘
       └─────────────┘                  │
                                        ▼
                                 ┌─────────────┐
                                 │  Intent Type│
                                 └──────┬──────┘
                                        │
         ┌──────────┬──────────┬────────┼────────┬──────────┬──────────┐
         ▼          ▼          ▼        ▼        ▼          ▼          ▼
    ┌─────────┐ ┌─────────┐ ┌─────────┐ │  ┌─────────┐ ┌─────────┐ ┌─────────┐
    │  QUERY  │ │  ACTION │ │RESEARCH │ │  │  DEBUG  │ │  PLAN   │ │  META   │
    └────┬────┘ └────┬────┘ └────┬────┘ │  └────┬────┘ └────┬────┘ └────┬────┘
         │           │           │      │       │           │           │
         ▼           ▼           ▼      │       ▼           ▼           ▼
    ┌─────────┐ ┌─────────┐ ┌─────────┐ │  ┌─────────┐ ┌─────────┐ ┌─────────┐
    │  ralph  │ │end-to-end│ │ research│ │  │debugging│ │ planning│ │meta-cog │
    │ (default)│ │         │ │         │ │  │         │ │         │ │         │
    └─────────┘ └─────────┘ └─────────┘ │  └─────────┘ └─────────┘ └─────────┘
                                        │
                                        ▼
                                 ┌─────────────┐
                                 │ Confidence  │
                                 │    < 0.5?   │
                                 └──────┬──────┘
                                        │
                           ┌────────────┴────────────┐
                           │Yes                      │No
                           ▼                         ▼
                    ┌─────────────┐           ┌─────────────┐
                    │ exploration │           │ Selected    │
                    │    Loop     │           │    Loop     │
                    └─────────────┘           └─────────────┘
```

---

## Memory System Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         MEMORY SYSTEM                                    │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                        SESSION MEMORY                                    │
│                      (In-Memory, Volatile)                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   Session: sess-12345                                                   │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  Messages:                                                      │  │
│   │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐               │  │
│   │  │ User:   │ │ Agent:  │ │ User:   │ │ Agent:  │               │  │
│   │  │"Hello"  │ │"Hi!"    │ │"Do X"   │ │"OK..."  │               │  │
│   │  └─────────┘ └─────────┘ └─────────┘ └─────────┘               │  │
│   │                                                                 │  │
│   │  Context: {userId: "u1", channel: "gmail", goals: [...]}       │  │
│   │  Working Memory: {currentTask: "...", partialResults: [...]}   │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   Session: sess-12346                                                   │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  Messages: [...]                                                │  │
│   │  Context: {...}                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ Consolidation
                                    │ (every 6 hours)
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                       LONG-TERM MEMORY                                   │
│                    (File System, Persistent)                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   data/memory/memory.json                                               │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  [                                                              │  │
│   │    {key: "user:u1:preferences", value: {...}, type: "preference"},│  │
│   │    {key: "fact:api_limit", value: "1000/hour", type: "fact"},    │  │
│   │    {key: "skill:web_search", value: {...}, type: "skill"},       │  │
│   │    {key: "event:deployment_2025_01", value: {...}, type: "event"}│  │
│   │  ]                                                              │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ Embedding Generation
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        VECTOR MEMORY                                     │
│                   (ChromaDB/LanceDB, Semantic)                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  ID    │ Text                    │ Embedding (1536d) │ Metadata │  │
│   │  ──────┼─────────────────────────┼───────────────────┼───────── │  │
│   │  v1    │ "User likes Python..."  │ [0.23, -0.45,...] │ {...}   │  │
│   │  v2    │ "API rate limit is..."  │ [-0.12, 0.89,...] │ {...}   │  │
│   │  v3    │ "Common error: ..."     │ [0.67, 0.34,...]  │ {...}   │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   Query: "What does the user prefer?"                                   │
│   Embedding: [0.25, -0.42, ...]                                         │
│   Similarity Search → Returns: v1 (cosine sim: 0.89)                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Cron & Heartbeat System

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      CRON & HEARTBEAT SYSTEM                             │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                         CRON JOBS                                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   HEARTBEAT.md Configuration:                                           │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │  Job              │ Schedule        │ Action                    │  │
│   │  ─────────────────┼─────────────────┼───────────────────────────│  │
│   │  health-check     │ */5 * * * *     │ check-health              │  │
│   │  memory-consolidate│ 0 */6 * * *    │ consolidate-memory        │  │
│   │  self-update      │ 0 0 * * *       │ check-for-updates         │  │
│   │  maintenance      │ 0 2 * * 0       │ system-maintenance        │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   Execution Flow:                                                       │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐             │
│   │  Cron   │───▶│ Parse   │───▶│ Schedule│───▶│ Execute │             │
│   │  Config │    │ Expression    │ Timer   │    │  Job    │             │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘             │
│                                                       │                 │
│                                                       ▼                 │
│                                               ┌─────────────┐          │
│                                               │ Publish     │          │
│                                               │ CRON_TRIGGER│          │
│                                               │ Event       │          │
│                                               └─────────────┘          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                        HEARTBEAT                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   Every 60 seconds:                                                     │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐             │
│   │ Collect │───▶│ Format  │───▶│ Publish │───▶│  Log    │             │
│   │ Metrics │    │ Message │    │  Event  │    │  State  │             │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘             │
│                                                                         │
│   Heartbeat Event:                                                      │
│   {                                                                     │
│     type: "HEARTBEAT",                                                  │
│     payload: {                                                          │
│       agentId: "openclaw-win10-agent",                                  │
│       status: "healthy",  // healthy | degraded | error                 │
│       metrics: {                                                        │
│         uptime: 86400,                                                  │
│         activeSessions: 5,                                              │
│         memoryUsage: 45%,                                               │
│         cpuUsage: 12%,                                                  │
│         lastError: null                                                 │
│       }                                                                 │
│     }                                                                   │
│   }                                                                     │
│                                                                         │
│   Alert Thresholds:                                                     │
│   - CPU > 80%  → Status: degraded                                       │
│   - Memory > 85% → Status: degraded                                     │
│   - Error rate > 5% → Status: error                                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        SECURITY LAYERS                                   │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                    PERMISSION LEVELS                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   Level 1: READ-ONLY                                                    │
│   ├─ Safe operations with no side effects                               │
│   ├─ Examples: read files, browse web, search                           │
│   └─ Auto-approved                                                      │
│                                                                         │
│   Level 2: FILE_OPERATIONS                                              │
│   ├─ Read/write to workspace directory only                             │
│   ├─ Examples: create files, modify configs                             │
│   └─ Auto-approved within workspace                                     │
│                                                                         │
│   Level 3: NETWORK_ACCESS                                               │
│   ├─ API calls and web requests                                         │
│   ├─ Examples: send emails, API integrations                            │
│   └─ Requires credential validation                                     │
│                                                                         │
│   Level 4: SYSTEM_COMMANDS                                              │
│   ├─ Shell commands (restricted list)                                   │
│   ├─ Examples: ls, cat, grep (allowed commands only)                    │
│   └─ Sandbox execution required                                         │
│                                                                         │
│   Level 5: FULL_ACCESS                                                  │
│   ├─ System-level operations                                            │
│   ├─ Examples: install software, modify system                          │
│   └─ Requires explicit user confirmation                                │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                     SANDBOX ENVIRONMENT                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                    DOCKER CONTAINER                             │  │
│   │                                                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  Isolated Filesystem                                    │   │  │
│   │  │  - /workspace (read-write, mounted from host)           │   │  │
│   │  │  - /readonly (read-only, system files)                  │   │  │
│   │  │  - No access to host filesystem outside mounts          │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                                                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  Resource Limits                                        │   │  │
│   │  │  - CPU: 1 core max                                      │   │  │
│   │  │  - Memory: 512MB max                                    │   │  │
│   │  │  - Disk: 1GB max                                        │   │  │
│   │  │  - Network: Restricted egress                           │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                                                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  Execution Timeout                                      │   │  │
│   │  │  - Default: 30 seconds                                  │   │  │
│   │  │  - Max: 5 minutes                                       │   │  │
│   │  │  - Auto-kill on timeout                                 │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                       AUDIT LOGGING                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   Every action logged:                                                  │
│   {                                                                     │
│     timestamp: "2025-01-15T10:30:00Z",                                  │
│     level: "INFO",  // INFO | WARN | ERROR                              │
│     action: "TOOL_EXECUTION",                                           │
│     actor: "agent-core",                                                │
│     sessionId: "sess-12345",                                            │
│     userId: "user-67890",                                               │
│     details: {                                                          │
│       tool: "file_system",                                              │
│       operation: "write",                                               │
│       path: "/workspace/output.txt",                                    │
│       permissionLevel: "file-operations"                                │
│     },                                                                  │
│     result: "success",  // success | failure                            │
│     duration: 45  // milliseconds                                       │
│   }                                                                     │
│                                                                         │
│   Logs written to: data/logs/audit-YYYY-MM-DD.jsonl                   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Summary

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        DATA FLOW SUMMARY                                 │
└─────────────────────────────────────────────────────────────────────────┘

INPUT (User Message)
    │
    ├──► Gateway Layer
    │       ├──► Channel Adapter (Gmail/Twilio/Browser)
    │       ├──► Message Normalization
    │       └──► Session Management
    │
    ├──► Event Bus
    │       └──► Publish INBOUND_MESSAGE
    │
    ├──► Agent Core
    │       ├──► Intent Parser (GPT-5.2)
    │       ├──► Action Planner (GPT-5.2)
    │       ├──► Agentic Loop Selection
    │       └──► Plan Execution
    │
    ├──► Execution Layer
    │       ├──► Tool Registry
    │       ├──► Sandbox Execution
    │       └──► Result Collection
    │
    ├──► Memory System
    │       ├──► Session Memory Update
    │       ├──► Long-term Memory (async)
    │       └──► Vector Store (async)
    │
    └──► Output
            ├──► Response Formatting
            ├──► Gateway Response
            └──► User Receives Reply

PARALLEL FLOWS:

Cron Jobs ──► Event Bus ──► Job Execution ──► Memory/Action

Heartbeat ──► Metrics Collection ──► Status Report ──► Log

Error ──► Error Handler ──► Recovery/Alert ──► Log
```

---

*Architecture Diagrams v1.0*  
*OpenClaw Windows 10 AI Agent System*
